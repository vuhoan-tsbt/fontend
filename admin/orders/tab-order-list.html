<div ng-show="isLoading" class="loading">
    <div class="spinner-border text-primary spinner-center" role="status">
    </div>
</div>

<div class="row mt-1">
    <ul class="nav nav-tabs mt-2 tab-list-status-bill nav-justified" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="waitConfirm-tab" data-bs-toggle="tab" data-bs-target="#waitConfirm"
                type="button" role="tab" aria-controls="waitConfirm" aria-selected="false"
                ng-click="getBillsByStatus(1)">Chờ xác nhận
                <span class="position-sticky top-0 start-100 translate-middle badge rounded-pill bg-danger">{{countBillWaitConfirm}}</span></button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link " id="waitShip-tab" data-bs-toggle="tab" data-bs-target="#waitShip" type="button"
                role="tab" aria-controls="waitShip" aria-selected="true" ng-click="getBillsByStatus(2)">Chờ
                giao
                <span class="position-sticky top-0 start-100 translate-middle badge rounded-pill bg-danger">{{countBillWaitDelivery}}</span></button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="shipping-tab" data-bs-toggle="tab" data-bs-target="#shipping" type="button"
                role="tab" aria-controls="shipping" aria-selected="false" ng-click="getBillsByStatus(3)">Đang
                giao</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link " id="success-tab" data-bs-toggle="tab" data-bs-target="#success" type="button"
                role="tab" aria-controls="success" aria-selected="true" ng-click="getBillsByStatus(4)">Hoàn
                thành</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="cancel-tab" data-bs-toggle="tab" data-bs-target="#cancel" type="button"
                role="tab" aria-controls="cancel" aria-selected="false" ng-click="getBillsByStatus(5)">Hủy</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link " id="waitPay-tab" data-bs-toggle="tab" data-bs-target="#waitPay" type="button"
                role="tab" aria-controls="waitPay" aria-selected="true" ng-click="getBillsByStatus(0)">Chờ thanh
                toán <span class="position-sticky top-0 start-100 translate-middle badge rounded-pill bg-danger">{{countBillWaitPay}}</span></button>
        </li>

    </ul>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="waitConfirm" role="tabpanel" aria-labelledby="waitConfirm-tab">
            <div ng-include="'/admin/orders/tab-by-status-1.html'"></div>
        </div>
        <div class="tab-pane fade" id="waitShip" role="tabpanel" aria-labelledby="waitShip-tab">
            <div ng-include="'/admin/orders/tab-by-status-2.html'"></div>
        </div>
        <div class="tab-pane fade" id="shipping" role="tabpanel" aria-labelledby="shipping-tab">
            <div ng-include="'/admin/orders/tab-by-status-3.html'"></div>
        </div>
        <div class="tab-pane fade" id="success" role="tabpanel" aria-labelledby="success-tab">
            <div ng-include="'/admin/orders/tab-by-status-4.html'"></div>
        </div>
        <div class="tab-pane fade" id="cancel" role="tabpanel" aria-labelledby="cancel-tab">
            <div ng-include="'/admin/orders/tab-by-status-5.html'"></div>
        </div>
        <div class="tab-pane fade" id="waitPay" role="tabpanel" aria-labelledby="waitPay-tab">
            <div ng-include="'/admin/orders/tab-by-status-0.html'"></div>
        </div>
    </div>
</div>


<!-- modal Bill Detail -->
<div style="z-index: 1500;" class="modal fade modal-option" id="exampleModalCartDetail" tabindex="-1"
    aria-labelledby="exampleModalLabel">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title d-flex justify-content-center" id="exampleModalLabel">Chi tiết hóa đơn</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- <div ng-if="bill.status <= 2">
                    <div class="col-8">
                        <label for="user" class="form-lable">Khách hàng:</label>
                        <input class="form-control" ng-model="bill.customers.fullName">
                    </div>
                    <div class="col-8">
                        <label for="user" class="form-lable">SĐT:</label>
                        <input class="form-control" ng-model="bill.customers.phone">
                    </div>
                    <div class="col-8">
                        <label for="user" class="form-lable">Địa chỉ:</label>
                        <input class="form-control" ng-model="bill.address">
                    </div>
                    <div class="col-8">
                        <label for="user" class="form-lable">Phí ship:</label>
                        <input class="form-control" ng-model="bill.shippingFee" readonly>
                    </div>
                </div> -->
                <div ng-if="bill.status >= 4">
                    <div class="mb-3">
                        <!-- <button type="button" class="btn btn-primary">Bill</button> -->
                        <label for="user" class="form-lable">Khách hàng:</label>
                        <input class="form-control" ng-model="bill.customers.fullName" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="user" class="form-lable">SĐT:</label>
                        <input class="form-control" ng-model="bill.customers.phone" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="user" class="form-lable">Địa chỉ:</label>
                        <input class="form-control" ng-model="addressBill" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="user" class="form-lable">Phí ship:</label>
                        <input class="form-control" ng-model="bill.shippingFee" readonly>
                    </div>
                </div>


                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home"
                            type="button" role="tab" aria-controls="home" aria-selected="true">Sản phẩm mua</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile"
                            type="button" role="tab" aria-controls="profile" aria-selected="false">Sản phẩm khách
                            trả</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact"
                            type="button" role="tab" aria-controls="contact" aria-selected="false">Sản phẩm Shop
                            đổi-trả</button>
                    </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                        <div class="row">
                            <div class="card card-body" style="max-height: 300px; overflow-x: auto;">
                                <div class="table-responsive">
                                    <table class="table table-striped table-inverse text-nowrap">
                                        <thead class="thead-inverse">
                                            <tr style="position: sticky; top: 0;">
                                                <th class="text-black-50">Tên sản phẩm</th>
                                                <th class="text-black-50">Đơn giá (VNĐ)</th>
                                                <th class="text-black-50">Số lượng</th>
                                                <th class="text-black-50">VAT (%)</th>
                                                <th class="text-black-50">Tổng tiền (VNĐ)</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="billDet in billDetailsBuy">
                                                <td>{{billDet.productVariant.products.productName}}</td>
                                                <td>{{billDet.price | currency:"":0}}</td>
                                                <td>{{billDet.quantity | currency:"":0}}</td>
                                                <td>{{billDet.tax | currency:"":0}}</td>
                                                <td>{{billDet.totalMoney | currency:"":0}}</td>
                                                <td>
                                                    <button class="btn btn-success" ng-if="bill.status<=2"
                                                        ng-click="getProductVariantId(billDet)">Sửa</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                        <div class="row">
                            <div class="card card-body" style="max-height: 300px; overflow-x: auto;">
                                <div class="table-responsive">
                                    <table class="table table-striped table-inverse text-nowrap">
                                        <thead class="thead-inverse">
                                            <tr style="position: sticky; top: 0;">
                                                <th class="text-black-50">Tên sản phẩm</th>
                                                <th class="text-black-50">Đơn giá (VNĐ)</th>
                                                <th class="text-black-50">Số lượng</th>
                                                <th class="text-black-50">VAT (%)</th>
                                                <th class="text-black-50">Tổng tiền (VNĐ)</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody ng-if="billDetailsCusReturn">
                                            <tr ng-repeat="billDet in billDetailsCusReturn">
                                                <td>{{billDet.productVariant.products.productName}}</td>
                                                <td>{{billDet.price | currency:"":0}}</td>
                                                <td>{{billDet.quantity | currency:"":0}}</td>
                                                <td>{{billDet.tax | currency:"":0}}</td>
                                                <td>{{billDet.totalMoney | currency:"":0}}</td>
                                                <td>
                                                    <button class="btn btn-success" ng-if="bill.status<=2"
                                                        ng-click="getProductVariantId(billDet)">Sửa</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                        <div class="row">
                            <div class="card card-body" style="max-height: 300px; overflow-x: auto;">
                                <div class="table-responsive">
                                    <table class="table table-striped table-inverse text-nowrap">
                                        <thead class="thead-inverse">
                                            <tr style="position: sticky; top: 0;">
                                                <th class="text-black-50">Tên sản phẩm</th>
                                                <th class="text-black-50">Đơn giá (VNĐ)</th>
                                                <th class="text-black-50">Số lượng</th>
                                                <th class="text-black-50">VAT (%)</th>
                                                <th class="text-black-50">Tổng tiền (VNĐ)</th>
                                                <th class="text-black-50">Ghi chú</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody ng-if="billDetailsStoreReturn">
                                            <tr ng-repeat="billDet in billDetailsStoreReturn">
                                                <td>{{billDet.productVariant.products.productName}}</td>
                                                <td>{{billDet.price | currency:"":0}}</td>
                                                <td>{{billDet.quantity | currency:"":0}}</td>
                                                <td>{{billDet.tax | currency:"":0}}</td>
                                                <td>{{billDet.totalMoney | currency:"":0}}</td>
                                                <td>{{billDet.note}}</td>
                                                <td>
                                                    <button class="btn btn-success" ng-if="bill.status<=2"
                                                        ng-click="getProductVariantId(billDet)">Sửa</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>











                <!-- <div class="table-responsive" ng-if="returnBillIndex < 0">
                    <table class="table table-striped table-inverse text-nowrap">
                        <thead class="thead-inverse">
                            <th class="text-black-50">Tên sản phẩm</th>
                            <th class="text-black-50">Đơn giá (VNĐ)</th>
                            <th class="text-black-50">Số lượng</th>
                            <th class="text-black-50">VAT (%)</th>
                            <th class="text-black-50">Tổng tiền (VNĐ)</th>
                            <th></th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="billDet in billDetails">
                                <td>{{billDet.productVariants.products.productName}}</td>
                                <td>{{billDet.price | currency:"":0}}</td>
                                <td>{{billDet.quantity | currency:"":0}}</td>
                                <td>{{billDet.tax | currency:"":0}}</td>
                                <td>{{billDet.totalMoney | currency:"":0}}</td>
                                <td>
                                    <button class="btn btn-success" ng-if="bill.status<=2"
                                        ng-click="getProductVariantId(billDet)">Sửa</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div> -->

                <!-- <div ng-if="returnBillIndex >= 0">
                    <ul class="nav nav-tabs mt-3" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="purchase-tab" data-bs-toggle="tab"
                                data-bs-target="#purchase" type="button" role="tab" aria-controls="purchase"
                                aria-selected="true">Lịch sử mua hàng</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history"
                                type="button" role="tab" aria-controls="history" aria-selected="false">Lịch sử trả
                                hàng</button>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="purchase" role="tabpanel"
                            aria-labelledby="purchase-tab">
                            <table class="table table-striped table-inverse text-nowrap">
                                <thead class="thead-inverse">
                                    <th class="text-black-50">Tên sản phẩm</th>
                                    <th class="text-black-50">Đơn giá(VNĐ)</th>
                                    <th class="text-black-50">Số lượng</th>
                                    <th class="text-black-50">VAT(%)</th>
                                    <th class="text-black-50">Tổng tiền(VNĐ)</th>
                                    <th></th>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="billDet in billDetails">
                                        <td>{{billDet.productVariants.products.productName}}</td>
                                        <td>{{billDet.price | currency:"":0}}</td>
                                        <td>{{billDet.quantity | currency:"":0}}</td>
                                        <td>{{billDet.tax | currency:"":0}}</td>
                                        <td>{{billDet.totalMoney | currency:"":0}}</td>
                                        <td>
                                            <button class="btn btn-success" ng-if="bill.status<=2"
                                                ng-click="getProductVariantId(billDet)">Sửa</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="tab-pane fade" id="history" role="tabpanel" aria-labelledby="history-tab">
                            <table class="table table-striped table-inverse text-nowrap">
                                <thead class="thead-inverse">
                                    <th class="text-black-50">Tên sản phẩm</th>
                                    <th class="text-black-50">Đơn giá(VNĐ)</th>
                                    <th class="text-black-50">Số lượng</th>
                                    <th class="text-black-50">VAT(%)</th>
                                    <th class="text-black-50">Tổng tiền(%)</th>
                                    <th></th>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="billDet in listBillDetailReturn">
                                        <td>{{billDet.productVariants.products.productName}}</td>
                                        <td>{{billDet.price | currency:"":0}}</td>
                                        <td>{{billDet.quantity | currency:"":0}}</td>
                                        <td>{{billDet.tax | currency:"":0}}</td>
                                        <td>{{billDet.totalMoney | currency:"":0}}</td>
                                        <td>
                                            <button class="btn btn-success" ng-if="bill.status<=2"
                                                ng-click="getProductVariantId(billDet)">Sửa</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div> -->

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success" ng-click="exportQrCodeBill(bill.billId)">Xuất QR
                    Code</button>
                <button type="button" class="btn btn-outline-success" ng-click="exportPDFBill(bill.billId)">In hóa
                    đơn</button>
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>


<!-- modal update bill detail-->
<div style="z-index: 1500;" class="modal fade modal-option" id="exampleModalUpdateBill" tabindex="-1"
    aria-labelledby="exampleModalLabel">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div ng-show="isLoading" class="loading">
                <div class="spinner-border text-primary spinner-center" role="status">
                </div>
            </div>
            <div class="modal-header">
                <h5 class="modal-title d-flex justify-content-center" id="exampleModalLabel">Cập nhật hóa đơn</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-1">
                        <label for="recipient-name" class="col-form-label">Sản phẩm:
                            {{detailBillUpdate.productVariants.products.productName}}</label>
                    </div>
                    <div class="mb-3">
                        <label for="recipient-name" class="col-form-label">Đơn giá:</label>
                        <input type="number" class="form-control" id="email" ng-model="detailBillUpdate.price" />
                    </div>
                    <div class="mb-3">
                        <label for="message-text" class="col-form-label">Số lượng:</label>
                        <input type="number" class="form-control" id="Password" ng-model="detailBillUpdate.quantity"
                            max="{{maxProduct}}" min="1" />
                        <div>
                            <span ng-if="messageError"
                                style="color: red; font-style: italic;">{{messageError.quantity}}</span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                    ng-click="closeEditBill()">Close</button>
                <button type="button" class="btn btn-primary" ng-click="onEditBill(detailBillUpdate)">Update</button>
            </div>
        </div>
    </div>
</div>

<!-- modal update bill có status > 0 < 4 -->

<div class="modal fade" id="staticUpdateStatus123" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div ng-show="isLoading" class="loading">
            <div class="spinner-border text-primary spinner-center" role="status">
            </div>
        </div>
        <div class="modal-content">
            <div ng-show="isLoading" class="loading">
                <div class="spinner-border text-primary spinner-center" role="status">
                </div>
            </div>
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Cập nhật hóa đơn</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    ng-click="closeUpdateBillStatus123()"></button>
            </div>
            <div class="modal-body">


                <div class="row" ng-if="billStatus123.status != 3">
                    <div class="offset-5 col-sm-2">
                        <button class="btn btn-outline-success" ng-click="onOpenQRCodeStatus123()">QR Code sản phẩm <i
                                class="bi bi-qr-code fw-bold"></i></button>
                    </div>
                    <div class="col-sm-5">
                        <input class="form-control" placeholder="Tìm kiếm sản phẩm" type="text"
                            ng-model="txtSearchProductVariant"
                            ng-change="searchProductVariantByName(txtSearchProductVariant)"
                            ng-click="clickSearch(txtSearchProductVariant)" ng-model-options="{debounce : 500}">
                        <div id="search"
                            class="output-complete has-add-new ng-hide list-group-flush pro row rounded mt-2 col-5"
                            style="background-color: rgb(247, 247, 247);max-height: 550px; overflow: auto;"
                            ng-show="lstProductVariant.length">
                            <ul class=" bg-light" style="position: sticky; top: 0;">
                                <li class="offset-11 col-1 rounded xBackground"
                                    style="list-style-type: none; width: 16px; float: right;"><i class="bi bi-x-lg"
                                        ng-click="closeLstProVal()"></i>
                                </li>
                            </ul>
                            <ul ng-repeat="pro in lstProductVariant" ng-click="onAddBillStatus123(pro)" class="proVal">
                                <div class="row">
                                    <li class="col-xl-7" style="list-style-type: none;">
                                        <b>{{pro.products.productName}}</b>
                                    </li>
                                    <li class="col-xl-2" style="list-style-type: none;">
                                        <p class="text-end" ng-if="pro.sales > 0"
                                            style="text-decoration: line-through;">{{pro.price
                                            |currency:"":0}}</p>
                                    </li>
                                    <li class="col-xl-3" style="list-style-type: none;">
                                        <p class="text-end" ng-if="pro.sales > 0">
                                            {{pro.price-pro.sales |currency:"":0}}</p>
                                        <p class="text-end" ng-if="pro.sales ==0">{{pro.price |
                                            currency:"":0}}</p>
                                    </li>
                                </div>
                                <li style="list-style-type: none;">{{pro.skuId}}</li>
                                <li style="list-style-type: none;"><i style="color: rgb(151, 151, 151);">Quantity:</i>
                                    {{pro.quantity | currency:"":0}}</li>
                            </ul>
                        </div>

                    </div>
                </div>


                <div class="row">
                    <div class="col-md-5 border rounded mt-3">
                        <h4 class="text-center mb-3 mt-2">Thông tin khách hàng</h4>

                        <div class="row">
                            <div class="col-6 mt-4" ng-if="billStatus123.status != 3">
                                <input class="form-control" ng-model="txtSearchCustomer"
                                    ng-change="searchCustomerByPhoneOrEmail(txtSearchCustomer)"
                                    ng-click="clickSearchCustomer(txtSearchCustomer)"
                                    ng-model-options="{debounce : 500}" placeholder="Search by phone or email"
                                    type="text">
                            </div>
                            <div class="col-6 mt-4" ng-if="billStatus123.status == 3">
                                <input class="form-control" ng-model="txtSearchCustomer"
                                    ng-change="searchCustomerByPhoneOrEmail(txtSearchCustomer)"
                                    ng-click="clickSearchCustomer(txtSearchCustomer)"
                                    ng-model-options="{debounce : 500}" placeholder="Search by phone or email"
                                    type="text" readonly>
                            </div>

                            <!-- <div class="col-6 mb-3">
                                <label for="user" class="form-lable">Khách hàng:</label>
                                <input class="form-control" ng-model="billStatus123.customers.fullName"
                                    ng-click="clickCustomer()" readonly>
                                <select size="5" id="customers" class="form-control lstCustomers"
                                    ng-change="changeCustomerStatus123(billStatus123.customers)"
                                    ng-model="billStatus123.customers" ng-show="sttCustomer">
                                    <option ng-value="">Null</option>
                                    <option ng-repeat="cus in customers" ng-value="{{cus}}">{{cus.fullName}}
                                    </option>
                                </select>
                                <div>
                                    <span ng-if="messageCus != ''"
                                        style="color: red; font-style: italic;">{{messageCus}}</span>
                                </div>
                            </div> -->
                            <div class="col-6 mb-3">
                                <label for="user" class="form-lable">Khách hàng:</label>
                                <select id="customers" class="form-control lstCustomers"
                                    ng-change="changeCustomerStatus123(billStatus123.customers)"
                                    ng-model="billStatus123.customers"
                                    ng-options="cus as cus.fullName for cus in customers track by cus.userId">
                                </select>
                                <div>
                                    <span ng-if="messageCus != ''"
                                        style="color: red; font-style: italic;">{{messageCus}}</span>
                                </div>
                            </div>
                        </div>
                        <!-- <div></div> -->
                        <div class="mb-3 ">
                            <label class="form-lable">Mã HĐ: </label>
                            <div class="form-control">{{billStatus123.billId}}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 mb-3">
                                <label for="user" class="form-lable">Người bán:</label>
                                <div class="form-control">{{billStatus123.users.fullName}}</div>
                                <!-- <select id="user" class="form-control" ng-model="dynamicBill().users">
                                    <option ng-repeat="seller in sellers" ng-value="{{seller}}">{{seller.fullName}}</option>
                                </select> -->
                                <div>
                                    <span ng-if="messageSeller != ''"
                                        style="color: red; font-style: italic;">{{messageSeller}}</span>
                                </div>
                            </div>

                            <div class="col-6 mb-3">
                                <label for="phone" class="form-lable">Số điện thoại:</label>
                                <input type="text" id="phone" class="form-control" placeholder="Số điện thoại"
                                    ng-model="billStatus123.phone" ng-if="billStatus123.status != 3">
                                <input type="text" id="phone" class="form-control" placeholder="Số điện thoại"
                                    ng-model="billStatus123.phone" ng-if="billStatus123.status == 3" readonly>
                                <div>
                                    <span ng-if="messagePhone != ''"
                                        style="color: red; font-style: italic;">{{messagePhone}}</span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <label for="" class="form-lable">Địa chỉ:</label>
                            <div class="col-6 mb-3">

                                <div class="">
                                    <!-- <input class="form-control" type="text" placeholder="Thành phố/Tỉnh..."
                                        ng-model="billStatus123.divisionName" ng-click="clickDivisionStatus123()"
                                        readonly> -->
                                    <select class="form-control" ng-model="dataAddress.division123"
                                        ng-change="changeDivisionStatus123(dataAddress.division123.ProvinceID, dataAddress.division123.ProvinceName)"
                                        ng-click="clickDivisionOnSelect()"
                                        ng-options="division as division.ProvinceName for division in lstDivision123 track by division.ProvinceID">
                                        <option value="" ng-click="clickNullDivisionStatus123()">Tỉnh/Thành phố</option>
                                        <!-- <option ng-repeat="division in lstDivision" ng-value="{{division}}">
                                            {{division.ProvinceName}}</option> -->
                                    </select>
                                </div>

                                <div class="mt-3">
                                    <!-- <input class="form-control" type="text" placeholder="Quận/Huyện..."
                                        ng-model="billStatus123.districtName" ng-click="clickDistrictStatus123()"
                                        readonly> -->
                                    <select class="form-control" ng-model="dataAddress.district123"
                                        ng-change="changeDistrictStatus123(dataAddress.district123.DistrictID, dataAddress.district123.DistrictName)"
                                        ng-click="clickDistrictOnSelect()"
                                        ng-options="district as district.DistrictName for district in lstDistrict123 track by district.DistrictID">
                                        <option value="" ng-click="clickNullDistrictStatus123()">Quận/Huyện</option>
                                        <!-- <option ng-repeat="district in lstDistrict123" ng-value="{{district}}">
                                            {{district.DistrictName}}</option> -->
                                    </select>
                                </div>

                                <div class="mt-3">
                                    <!-- <input class="form-control" type="text" placeholder="Phường/Xã..."
                                        ng-model="billStatus123.wardName" ng-click="clickWardStatus123()" readonly> -->
                                    <select class="form-control" ng-model="dataAddress.ward123"
                                        ng-change="changeWardStatus123(dataAddress.ward123.WardName,dataAddress.ward123.WardCode)"
                                        ng-click="clickWardOnSelect()"
                                        ng-options="ward as ward.WardName for ward in lstWard123 track by ward.WardCode">
                                        <option value="" ng-click="clickNullWardStatus123()">Xã/Phường</option>
                                        <!-- <option ng-repeat="ward in lstWard123" ng-value="{{ward}}">{{ward.WardName}}
                                        </option> -->
                                    </select>
                                </div>
                                <div>
                                    <span ng-if="messageAddress != ''"
                                        style="color: red; font-style: italic;">{{messageAddress}}</span>
                                </div>
                            </div>

                            <div class="col-6 form-floating" ng-if="billStatus123.status != 3">
                                <label for=""></label>
                                <textarea class="form-control" ng-model="$parent.billStatus123.address"
                                    placeholder="Leave a comment here" id="floatingTextarea2"
                                    style="height: 145px"></textarea>
                                <label for="floatingTextarea2" class="ms-2">Địa chỉ chi tiết:</label>
                            </div>
                            <div class="col-6 form-floating" ng-if="billStatus123.status == 3">
                                <label for=""></label>
                                <textarea readonly class="form-control" ng-model="$parent.billStatus123.address"
                                    placeholder="Leave a comment here" id="floatingTextarea2"
                                    style="height: 145px"></textarea>
                                <label for="floatingTextarea2" class="ms-2">Địa chỉ chi tiết:</label>
                            </div>

                        </div>


                        <div class="row">

                            <div class="col-6 form-floating">
                                <div class="mb-3">
                                    <label class="form-lable">Khuyến mãi: </label>
                                    <div class="input-group">
                                        <input class="form-control" ng-model="billStatus123.discount" type="number"
                                            ng-change="changeDiscountStatus123()" ng-model-options="{debounce : 500}"
                                            ng-if="billStatus123.status != 3">
                                        <input class="form-control" ng-model="billStatus123.discount" type="number"
                                            ng-change="changeDiscountStatus123()" ng-model-options="{debounce : 500}"
                                            ng-if="billStatus123.status == 3" readonly>
                                        <span class="input-group-text">%</span>
                                    </div>
                                </div>

                            </div>
                            <div class="col-6 form-floating">
                                <div class="mb-3">
                                    <label class="form-lable">Tổng tiền sản phẩm: </label>
                                    <div class="input-group">
                                        <input class="form-control" ng-model="proPrice" readonly>
                                        <span class="input-group-text">VNĐ</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6 mb-3">
                                <div class="mb-3">
                                    <label class="form-lable">Phương thức mua hàng: </label>
                                    <select class="form-control" ng-change="shippingFeeStatus123()"
                                        ng-model="billStatus123.billType" convert-to-number>
                                        <option value="1">Tại cửa hàng</option>
                                        <option value="0">Online</option>
                                    </select>
                                </div>

                            </div>
                            <div class="col-6 form-floating">
                                <div class="mb-3">
                                    <label class="form-lable">Phương thức thanh toán: </label>
                                    <select class="form-control" ng-model="billStatus123.payments" convert-to-number>
                                        <option value="0">Tiền mặt</option>
                                        <option value="1">Online</option>
                                    </select>
                                </div>

                            </div>
                        </div>
                        <div class="row mb-3" ng-if="billStatus123.wardName && billStatus123.billType == 0">
                            <div class="row">
                                <label for="" class="form-lable col-6">Đơn vị vận chuyển:</label>
                                <img src="\images\logo\ghn.jpg" class="col-6">
                            </div>
                            <div class="mb-3">
                                <label class="form-lable col-6">Phí vận chuyển: </label>
                                <input class="form-control col-6" ng-model="billStatus123.shippingFee" readonly>
                            </div>
                            <div class="mb-3">
                                <label class="form-lable col-6">Tổng tiền: </label>
                                <input class="form-control col-6" value="{{proPrice + billStatus123.shippingFee}}"
                                    readonly>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="mb-3 form-floating" ng-if="billStatus123.status != 3">
                                <!-- <label class="form-lable">Ghi chú: </label>
                            <input class="form-control" ng-model="dynamicBill().note"> -->

                                <textarea class="form-control" ng-model="$parent.billStatus123.note"
                                    placeholder="Leave a comment here" id="floatingTextarea3" style="height: 135px"></textarea>
                                <label for="floatingTextarea3" class="ms-1">Ghi chú:</label>
                                <div>
                                    <span ng-if="messageNote != ''"
                                        style="color: red; font-style: italic;">{{messageNote}}</span>
                                </div>
                            </div>
                            <div class="mb-3 form-floating" ng-if="billStatus123.status == 3">
                                <!-- <label class="form-lable">Ghi chú: </label>
                            <input class="form-control" ng-model="dynamicBill().note"> -->

                                <textarea readonly class="form-control" ng-model="$parent.billStatus123.note"
                                    placeholder="Leave a comment here" id="floatingTextarea3" style="height: 135px"></textarea>
                                <label for="floatingTextarea3" class="ms-1">Ghi chú:</label>
                                <div>
                                    <span ng-if="messageNote != ''"
                                        style="color: red; font-style: italic;">{{messageNote}}</span>
                                </div>
                            </div>

                        </div>
                        <div class="row mb-3">
                            <label class="form-lable col-6" ng-if="billStatus123.status == 1">Trạng thái: Chờ xác
                                nhận</label>
                            <label class="form-lable col-6" ng-if="billStatus123.status == 2">Trạng thái: Chờ
                                giao</label>
                            <label class="form-lable col-6" ng-if="billStatus123.status == 3">Trạng thái: Đang
                                giao</label>
                        </div>

                    </div>

                    <div class="col-md-7 border rounded mt-3">
                        <h4 class="text-center mb-3 mt-2">Giỏ hàng</h4>

                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <th>#</th>
                                    <th>Sản phẩm</th>
                                    <th class="text-center">Số lượng</th>
                                    <th class="text-center">Đơn giá</th>
                                    <th class="text-center">Thuế</th>
                                    <th>Thành tiền</th>
                                    <th></th>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="pro in billDetailStatus123">
                                        <td>{{$index + 1}}</td>
                                        <td>{{pro.productVariants.products.productName}}</td>
                                        <td>
                                            <a ng-click="decreaseStatus123($index)" ng-model-options="{debounce : 500}"
                                                ng-show="billStatus123.status != 3"><i
                                                    class="bi bi-dash-circle"></i></a>
                                            <input type="number" ng-model="pro.quantity"
                                                ng-mouseover="oldQuantityOfCartStatus123($index)"
                                                ng-change="quantityChangeStatus123($index)"
                                                ng-model-options="{debounce : 500}" class="col-6 border-0 text-center"
                                                value='pro.quantity' max="{{maxProduct}}" min="1"
                                                ng-if="billStatus123.status != 3" />
                                            <input type="number" ng-model="pro.quantity"
                                                ng-mouseover="oldQuantityOfCartStatus123($index)"
                                                ng-change="quantityChangeStatus123($index)"
                                                ng-model-options="{debounce : 500}" class="col-6 border-0 text-center"
                                                value='pro.quantity' max="{{maxProduct}}" min="1"
                                                ng-if="billStatus123.status == 3" readonly />
                                            <a ng-click="increaseStatus123($index)" ng-model-options="{debounce : 500}"
                                                ng-show="billStatus123.status != 3"><i
                                                    class="bi bi-plus-circle"></i></a>
                                        </td>
                                        <td style="width: 190px; text-align:center;">
                                            <input type="number" ng-model='pro.price'
                                                ng-mouseover="oldPriceOfCartStatus123($index)"
                                                ng-change="priceChangeStatus123($index)"
                                                ng-model-options="{debounce : 1000}" value='pro.price'
                                                class="col-7 border-0 text-end" ng-if="billStatus123.status != 3" />
                                            <input type="number" ng-model='pro.price'
                                                ng-mouseover="oldPriceOfCartStatus123($index)"
                                                ng-change="priceChangeStatus123($index)"
                                                ng-model-options="{debounce : 1000}" value='pro.price'
                                                class="col-7 border-0 text-end" ng-if="billStatus123.status == 3"
                                                readonly />
                                        </td>
                                        <td class="text-center">{{pro.tax | currency:"":0}}</td>
                                        <td class="text-center">{{pro.totalMoney | currency:"":0}}</td>
                                        <td>
                                            <!-- <button class="btn btn-success" ng-click="modalEditCart($index)">Sửa</button> -->
                                            <a ng-click="modalDeleteCartStatus123($index, pro.detailBillId)"><i
                                                    class="bi bi-trash"></i></a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <div>
                                <span ng-if="messageBillDetails != ''"
                                    style="color: red; font-style: italic;">{{messageBillDetails}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success"
                    ng-click="exportQrCodeBill(billStatus123.billId)">Xuất QR Code</button>
                <button class="btn btn-outline-primary" ng-click="updateBillStatus123()"
                    ng-if="billStatus123.status != 3">Cập
                    nhật</button>
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal"
                    ng-click="closeUpdateBillStatus123()">Đóng</button>
            </div>
        </div>
    </div>
</div>

<!-- modal delete billdetail of bill status 123 -->
<div class="modal fade" id="exampleModalDeleteBillStatus123" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div ng-show="isLoading" class="loading">
                <div class="spinner-border text-primary spinner-center" role="status">
                </div>
            </div>
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Xác nhận</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Sản phẩm này sẽ bị xóa!! Bạn có chắc chắn muốn xóa?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-primary" ng-click="onDeleteCartStatus123()">Xóa</button>
            </div>
        </div>
    </div>
</div>


<!-- modal update bill chưa thanh toán -->

<div class="modal fade" id="staticUpdateStatus5" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div class="modal-content">
            <div ng-show="isLoading" class="loading">
                <div class="spinner-border text-primary spinner-center" role="status">
                </div>
            </div>
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Cập nhật hóa đơn</h5>
                <button type="button" class="btn-close" ng-click="closeUpdateBillStatus5()" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">


                <div class="row">
                    <div class="offset-5 col-sm-2">
                        <button class="btn btn-outline-success" ng-click="onOpenQRCodeStatus5()">QR Code sản phẩm <i
                                class="bi bi-qr-code fw-bold"></i></button>
                    </div>
                    <div class="col-sm-5">
                        <input class="form-control" placeholder="Tìm kiếm sản phẩm" type="text"
                            ng-model="txtSearchProductVariant"
                            ng-change="searchProductVariantByName(txtSearchProductVariant)"
                            ng-click="clickSearch(txtSearchProductVariant)" ng-model-options="{debounce : 500}">
                        <div id="search"
                            class="output-complete has-add-new ng-hide list-group-flush pro row rounded mt-2 col-5"
                            style="background-color: rgb(247, 247, 247);max-height: 550px; overflow: auto;"
                            ng-show="lstProductVariant.length">
                            <ul class=" bg-light" style="position: sticky; top: 0;">
                                <li class="offset-11 col-1 rounded xBackground"
                                    style="list-style-type: none; width: 16px; float: right;"><i class="bi bi-x-lg"
                                        ng-click="closeLstProVal()"></i>
                                </li>
                            </ul>
                            <ul ng-repeat="pro in lstProductVariant" ng-click="onAddBillStatus5(pro)" class="proVal">
                                <div class="row">
                                    <li class="col-xl-7" style="list-style-type: none;">
                                        <b>{{pro.products.productName}}</b>
                                    </li>
                                    <li class="col-xl-2" style="list-style-type: none;">
                                        <p class="text-end" ng-if="pro.sales > 0"
                                            style="text-decoration: line-through;">{{pro.price
                                            |currency:"":0}}</p>
                                    </li>
                                    <li class="col-xl-3" style="list-style-type: none;">
                                        <p class="text-end" ng-if="pro.sales > 0">
                                            {{pro.price-pro.sales |currency:"":0}}</p>
                                        <p class="text-end" ng-if="pro.sales ==0">{{pro.price |
                                            currency:"":0}}</p>
                                    </li>
                                </div>
                                <li style="list-style-type: none;">{{pro.skuId}}</li>
                                <li style="list-style-type: none;"><i style="color: rgb(151, 151, 151);">Quantity:</i>
                                    {{pro.quantity | currency:"":0}}</li>
                            </ul>
                        </div>

                    </div>
                </div>


                <div class="row">
                    <div class="col-md-5 border rounded mt-3">
                        <h4 class="text-center mb-3 mt-2">Thông tin khách hàng</h4>

                        <div class="row">
                            <div class="col-6 mt-4">
                                <input class="form-control" ng-model="txtSearchCustomer"
                                    ng-change="searchCustomerByPhoneOrEmail(txtSearchCustomer)"
                                    ng-click="clickSearchCustomer(txtSearchCustomer)"
                                    ng-model-options="{debounce : 500}" placeholder="Search by phone or email"
                                    type="text">
                            </div>

                            <!-- <div class="col-6 mb-3">
                                <label for="user" class="form-lable">Khách hàng:</label>
                                <input class="form-control" ng-model="billStatus5.customers.fullName"
                                    ng-click="clickCustomer()" readonly>
                                <select size="5" id="customers" class="form-control lstCustomers"
                                    ng-change="changeCustomerStatus5(billStatus5.customers)"
                                    ng-model="billStatus5.customers" ng-show="sttCustomer">
                                    <option ng-value="">Null</option>
                                    <option ng-repeat="cus in customers" ng-value="{{cus}}">{{cus.fullName}}
                                    </option>
                                </select>
                                <div>
                                    <span ng-if="messageCus != ''"
                                        style="color: red; font-style: italic;">{{messageCus}}</span>
                                </div>
                            </div> -->
                            <div class="col-6 mb-3">
                                <label for="user" class="form-lable">Khách hàng:</label>
                                <select id="customers" class="form-control lstCustomers"
                                    ng-change="changeCustomerStatus5(billStatus5.customers)"
                                    ng-model="billStatus5.customers"
                                    ng-options="cus as cus.fullName for cus in customers track by cus.userId">
                                </select>
                                <div>
                                    <span ng-if="messageCus != ''"
                                        style="color: red; font-style: italic;">{{messageCus}}</span>
                                </div>
                            </div>
                        </div>
                        <!-- <div></div> -->
                        <div class="mb-3 ">
                            <label class="form-lable">Mã HĐ: </label>
                            <div class="form-control">{{billStatus5.billId}}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 mb-3">
                                <label for="user" class="form-lable">Người bán:</label>
                                <div class="form-control">{{userLogin.fullName}}</div>
                                <!-- <select id="user" class="form-control" ng-model="dynamicBill().users">
                                    <option ng-repeat="seller in sellers" ng-value="{{seller}}">{{seller.fullName}}</option>
                                </select> -->
                                <div>
                                    <span ng-if="messageSeller != ''"
                                        style="color: red; font-style: italic;">{{messageSeller}}</span>
                                </div>
                            </div>

                            <div class="col-6 mb-3">
                                <label for="phone" class="form-lable">Số điện thoại:</label>
                                <input type="text" id="phone" class="form-control" placeholder="Số điện thoại"
                                    ng-model="billStatus5.phone">
                                <div>
                                    <span ng-if="messagePhone != ''"
                                        style="color: red; font-style: italic;">{{messagePhone}}</span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <label for="" class="form-lable">Địa chỉ:</label>
                            <div class="col-6 mb-3">

                                <div class="">
                                    <!-- <input class="form-control" type="text" placeholder="Thành phố/Tỉnh..."
                                        ng-model="billStatus5.divisionName" ng-click="clickDivisionStatus5()" readonly> -->
                                    <select class="form-control" ng-model="address5.division"
                                        ng-change="changeDivisionStatus5(address5.division.ProvinceID, address5.division.ProvinceName)"
                                        ng-click="clickDivisionOnSelect()"
                                        ng-options="division as division.ProvinceName for division in lstDivision5 track by division.ProvinceID">
                                        <option value="" ng-click="clickNullDivisionStatus5()">Tỉnh/Thành phố</option>
                                        <!-- <option ng-repeat="division in lstDivision" ng-value="{{division}}">
                                            {{division.ProvinceName}}</option> -->
                                    </select>
                                </div>

                                <div class="mt-3">
                                    <!-- <input class="form-control" type="text" placeholder="Quận/Huyện..."
                                        ng-model="billStatus5.districtName" ng-click="clickDistrictStatus5()" readonly> -->
                                    <select class="form-control" ng-model="address5.district"
                                        ng-change="changeDistrictStatus5(address5.district.DistrictID, address5.district.DistrictName)"
                                        ng-click="clickDistrictOnSelect()"
                                        ng-options="district as district.DistrictName for district in lstDistrict5 track by district.DistrictID">
                                        <option value="" ng-click="clickNullDistrictStatus5()">Quận/Huyện</option>
                                        <!-- <option ng-repeat="district in lstDistrict" ng-value="{{district}}">
                                            {{district.DistrictName}}</option> -->
                                    </select>
                                </div>

                                <div class="mt-3">
                                    <!-- <input class="form-control" type="text" placeholder="Phường/Xã..."
                                        ng-model="billStatus5.wardName" ng-click="clickWardStatus5()" readonly> -->
                                    <select class="form-control" ng-model="address5.ward"
                                        ng-change="changeWardStatus5(address5.ward.WardName,address5.ward.WardCode)"
                                        ng-click="clickWardOnSelect()"
                                        ng-options="ward as ward.WardName for ward in lstWard5 track by ward.WardCode">
                                        <option value="" ng-click="clickNullWardStatus5()">Xã/Phường</option>
                                        <!-- <option ng-repeat="ward in lstWard" ng-value="{{ward}}">{{ward.WardName}}
                                        </option> -->
                                    </select>
                                </div>
                                <div>
                                    <span ng-if="messageAddress != ''"
                                        style="color: red; font-style: italic;">{{messageAddress}}</span>
                                </div>
                            </div>

                            <div class="col-6 form-floating">
                                <label for=""></label>
                                <textarea class="form-control" ng-model="$parent.billStatus5.address"
                                    placeholder="Leave a comment here" id="floatingTextarea2"
                                    style="height: 145px"></textarea>
                                <label for="floatingTextarea2" class="ms-2">Địa chỉ chi tiết:</label>
                            </div>

                        </div>


                        <div class="row">

                            <div class="col-6 form-floating">
                                <div class="mb-3">
                                    <label class="form-lable">Khuyến mãi: </label>
                                    <div class="input-group">
                                        <input class="form-control" ng-model="billStatus5.discount" type="number"
                                            ng-change="changeDiscountStatus5()" ng-model-options="{debounce : 500}">
                                        <span class="input-group-text">%</span>
                                    </div>
                                </div>

                            </div>
                            <div class="col-6 form-floating">
                                <div class="mb-3">
                                    <label class="form-lable">Tổng tiền sản phẩm: </label>
                                    <div class="input-group">
                                        <input class="form-control" ng-model="proPrice" readonly>
                                        <span class="input-group-text">VNĐ</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6 mb-3">
                                <div class="mb-3">
                                    <label class="form-lable">Phương thức mua hàng: </label>
                                    <select class="form-control" ng-change="shippingFeeStatus5()"
                                        ng-model="billStatus5.billType" convert-to-number>
                                        <option value="1">Tại cửa hàng</option>
                                        <option value="0">Online</option>
                                    </select>
                                </div>

                            </div>
                            <div class="col-6 form-floating">
                                <div class="mb-3">
                                    <label class="form-lable">Phương thức thanh toán: </label>
                                    <select class="form-control" ng-model="billStatus5.payments" convert-to-number>
                                        <option value="0">Tiền mặt</option>
                                        <option value="1">Online</option>
                                    </select>
                                </div>

                            </div>
                        </div>
                        <div class="row">
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" ng-model="billStatus5.status"
                                        id="flexCheckChecked">
                                    <label class="form-check-label" for="flexCheckChecked">
                                        Chờ thanh toán
                                    </label>
                                </div>
                            </div>

                        </div>
                        <div class="row mb-3" ng-if="billStatus5.wardName && billStatus5.billType == 0">
                            <div class="row">
                                <label for="" class="form-lable col-6">Đơn vị vận chuyển:</label>
                                <img src="\images\logo\ghn.jpg" class="col-6">
                            </div>
                            <div class="mb-3">
                                <label class="form-lable col-6">Phí vận chuyển: </label>
                                <input class="form-control col-6" ng-model="billStatus5.shippingFee" readonly>
                            </div>
                            <div class="mb-3">
                                <label class="form-lable col-6">Tổng tiền: </label>
                                <input class="form-control col-6" value="{{proPrice + billStatus5.shippingFee}}"
                                    readonly>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="mb-3 form-floating">
                                <!-- <label class="form-lable">Ghi chú: </label>
                            <input class="form-control" ng-model="dynamicBill().note"> -->

                                <textarea class="form-control" ng-model="$parent.billStatus5.note"
                                    placeholder="Leave a comment here" id="floatingTextarea3" style="height: 135px"></textarea>
                                <label for="floatingTextarea3" class="ms-1">Ghi chú:</label>
                                <div>
                                    <span ng-if="messageNote != ''"
                                        style="color: red; font-style: italic;">{{messageNote}}</span>
                                </div>
                            </div>

                        </div>


                    </div>

                    <div class="col-md-7 border rounded mt-3">
                        <h4 class="text-center mb-3 mt-2">Giỏ hàng</h4>

                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <th>#</th>
                                    <th>Sản phẩm</th>
                                    <th class="text-center">Số lượng</th>
                                    <th class="text-center">Đơn giá</th>
                                    <th class="text-center">Thuế</th>
                                    <th>Thành tiền</th>
                                    <th></th>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="pro in billDetailStatus5">
                                        <td>{{$index + 1}}</td>
                                        <td>{{pro.productVariants.products.productName}}</td>
                                        <td>
                                            <a ng-click="decreaseStatus5($index)" ng-model-options="{debounce : 500}"><i
                                                    class="bi bi-dash-circle"></i></a>
                                            <input type="number" ng-model="pro.quantity"
                                                ng-click="oldQuantityOfCartStatus5($index)"
                                                ng-change="quantityChangeStatus5($index)"
                                                ng-model-options="{debounce : 500}" class="col-6 border-0 text-center"
                                                value='pro.quantity' max="{{maxProduct}}" min="1" />
                                            <a ng-click="increaseStatus5($index)" ng-model-options="{debounce : 500}"><i
                                                    class="bi bi-plus-circle"></i></a>
                                        </td>
                                        <td style="width: 190px; text-align:center;">
                                            <input type="number" ng-model='pro.price'
                                                ng-click="oldPriceOfCartStatus5($index)"
                                                ng-change="priceChangeStatus5($index)"
                                                ng-model-options="{debounce : 1000}" value='pro.price'
                                                class="col-7 border-0 text-end" />
                                        </td>
                                        <td class="text-center">{{pro.tax | currency:"":0}}</td>
                                        <td class="text-center">{{pro.totalMoney | currency:"":0}}</td>
                                        <td>
                                            <!-- <button class="btn btn-success" ng-click="modalEditCart($index)">Sửa</button> -->
                                            <a ng-click="modalDeleteCartStatus5($index, pro.detailBillId)"><i
                                                    class="bi bi-trash"></i></a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <div>
                                <span ng-if="messageBillDetails != ''"
                                    style="color: red; font-style: italic;">{{messageBillDetails}}</span>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" ng-click="closeUpdateBillStatus5()"
                    data-bs-dismiss="modal">Đóng</button>
                <button class="btn btn-danger" ng-click="deleteBillStatus5()">Hủy</button>
                <button class="btn btn-primary" ng-click="updateBillStatus5()">Lưu</button>
            </div>
        </div>
    </div>
</div>


<!-- modal delete billdetail of bill status 5 -->
<div class="modal fade" id="exampleModalDeleteCartStatus5" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div ng-show="isLoading" class="loading">
                <div class="spinner-border text-primary spinner-center" role="status">
                </div>
            </div>
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Xác nhận</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Sản phẩm này sẽ bị xóa!! Bạn có chắc chắn muốn xóa?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-primary" ng-click="onDeleteCartStatus5()">Xóa</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal QR code lọc bill -->
<div class="modal fade" id="modalCamereQR" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div ng-show="isLoading" class="loading">
                <div class="spinner-border text-primary spinner-center" role="status">
                </div>
            </div>
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">QR Code</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    ng-click="onCloseQRCode()"></button>
            </div>
            <div class="modal-body">
                <div class="row m-0 mb-2">
                    <select class="form-select" ng-change="changeCamera(camera)" ng-model="camera"
                        ng-options="cam as cam.name for cam in lstCamera track by cam.id">
                    </select>
                </div>
                <video class="m-0" id="preview" width="100%" height="100%"></video>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal"
                    ng-click="onCloseQRCode()">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal QR code add cart status123 -->
<div class="modal fade" id="modalCamereQRStatus123" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div ng-show="isLoading" class="loading">
                <div class="spinner-border text-primary spinner-center" role="status">
                </div>
            </div>
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">QR Code</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    ng-click="onCloseQRCodeStatus123()"></button>
            </div>
            <div class="modal-body">
                <div class="row m-0 mb-2">
                    <select class="form-select" ng-change="changeCameraStatus123(camera)" ng-model="camera"
                        ng-options="cam as cam.name for cam in lstCamera track by cam.id">
                    </select>
                </div>
                <video class="m-0" id="previewStatus123" width="100%" height="100%"></video>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal"
                    ng-click="onCloseQRCodeStatus123()">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal QR code add cart status5 -->
<div class="modal fade" id="modalCamereQRStatus5" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div ng-show="isLoading" class="loading">
                <div class="spinner-border text-primary spinner-center" role="status">
                </div>
            </div>
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">QR Code</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    ng-click="onCloseQRCodeStatus5()"></button>
            </div>
            <div class="modal-body">
                <div class="row m-0 mb-2">
                    <select class="form-select" ng-change="changeCameraStatus5(camera)" ng-model="camera"
                        ng-options="cam as cam.name for cam in lstCamera track by cam.id">
                    </select>
                </div>
                <video class="m-0" id="previewStatus5" width="100%" height="100%"></video>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal"
                    ng-click="onCloseQRCodeStatus5()">Đóng</button>
            </div>
        </div>
    </div>
</div>